# Qwen-Image Local API Requirements
# Python 3.9+ recommended

# IMPORTANT INSTALLATION ORDER:
# 1. Install PyTorch with CUDA support first (see below)
# 2. Install development version of diffusers from GitHub:
#    pip install git+https://github.com/huggingface/diffusers
# 3. Install other dependencies:
#    pip install -r requirements.txt

--index-url https://pypi.org/simple

# ==== Core Web Framework ====
fastapi>=0.104.0
uvicorn[standard]>=0.24.0
pydantic>=2.0.0
python-multipart>=0.0.6

# ==== Deep Learning Framework ====
# Note: Install PyTorch with CUDA support separately for GPU acceleration:

# python -m venv .venv
# .venv\Scripts\activate
# pip cache purge

# pip uninstall -y torch torchvision torchaudio
# pip install torch==2.3.1+cu121 torchvision==0.18.1+cu121 torchaudio==2.3.1+cu121 --index-url https://download.pytorch.org/whl/cu121
# pip install torch==2.3.0+cu121 torchvision==0.18.0+cu121 torchaudio==2.3.0+cu121 --extra-index-url https://download.pytorch.org/whl/cu121

# pip install diffusers==0.30.2 transformers==4.43.3 accelerate==0.34.2

# pip install wheel setuptools ninja


# pip uninstall -y xformers
# pip install xformers==0.0.26.post1 --extra-index-url https://download.pytorch.org/whl/cu121 --no-build-isolation
# pip install xformers==0.0.28.post1 --extra-index-url https://download.pytorch.org/whl/cu121 --no-build-isolation
# pip install xformers==0.0.28.post3 --extra-index-url https://download.pytorch.org/whl/cu121 --no-build-isolation
# pip install https://download.pytorch.org/whl/cu121/xformers-0.0.26.post1-cp311-cp311-win_amd64.whl#sha256=d05c547b4ba603fc8e21fad03a342138eaaece35fe0a1692e6ee0d061ddd21ac
# pip install -U diffusers==0.30.0 transformers==4.45.0 accelerate==0.33.0 safetensors
# pip install -U diffusers>=0.31.0 transformers accelerate safetensors

# python.exe -m pip install --upgrade pip
# pip install "numpy<2" --break-system-packages

# pip install -U diffusers==0.31.0 transformers==4.45.0 accelerate==0.34.2
# pip install git+https://github.com/huggingface/diffusers

# pip install fastapi uvicorn pillow safetensors


# Or see: https://pytorch.org/get-started/locally/

# ==== Diffusion Models ====
# REQUIRED: Install development version from GitHub for QwenImagePipeline support
# pip install git+https://github.com/huggingface/diffusers
# diffusers>=0.36.0 (PyPI stable versions don't include QwenImagePipeline yet)

# ==== Qwen Image Generation Dependencies ====
transformers>=4.57.0  # Required for Qwen2_5_VLForConditionalGeneration
accelerate>=0.33.0
safetensors>=0.4.5
sentencepiece>=0.2.0
modelscope>=1.15.0
qwen-vl-utils>=0.0.6

# ==== Image and Tensor Utilities ====
Pillow>=10.0.0
numpy>=1.26.0

# ==== Progress and Utility Libraries ====
tqdm>=4.66.0
einops>=0.8.0

# ==== Optional Dependencies ====
# xformers - Memory efficient attention (can reduce VRAM usage by 20-30%)
# Install separately based on your CUDA version:
# pip install xformers --index-url https://download.pytorch.org/whl/cu121
# Or: pip install xformers --index-url https://download.pytorch.org/whl/cu118

# wmi - For GPU info on Windows (optional)
# pip install wmi
